<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phenomenal Learning Network</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-brand">
                    <i class="fas fa-constellation"></i>
                    <span>Phenomenal Learning</span>
                </div>
                <div class="nav-menu" id="nav-menu">
                    <a href="#home" class="nav-link active" data-page="home">
                        <i class="fas fa-home"></i> Home
                    </a>
                    <a href="#journey" class="nav-link" data-page="journey">
                        <i class="fas fa-route"></i> My Journey
                    </a>
                    <a href="#community" class="nav-link" data-page="community">
                        <i class="fas fa-users"></i> Community
                    </a>
                    <a href="#sync" class="nav-link" data-page="sync">
                        <i class="fas fa-sync"></i> Sync Lab
                    </a>
                    <a href="#profile" class="nav-link" data-page="profile">
                        <i class="fas fa-user"></i> Profile
                    </a>
                </div>
                <div class="nav-toggle" id="nav-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Home Page -->
            <section id="home-page" class="page active">
                <div class="container">
                    <div class="hero-section">
                        <h1 class="hero-title">Welcome to Your Learning Constellation</h1>
                        <p class="hero-subtitle">Embark on a journey of phenomenological discovery</p>
                        <div class="daily-inspiration">
                            <h3>Today's Inspiration</h3>
                            <p class="inspiration-quote" id="daily-quote">
                                "What is the most profound question that emerges from your current understanding?"
                            </p>
                            <button class="btn btn-primary" onclick="startNewJourney()">
                                <i class="fas fa-plus"></i> Start New Journey
                            </button>
                        </div>
                    </div>
                    
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <h3>My Constellation</h3>
                            <div class="constellation-preview" id="constellation-preview">
                                <canvas id="constellation-canvas" width="300" height="200"></canvas>
                            </div>
                            <p class="stats">Active Journeys: <span id="active-journeys">0</span></p>
                        </div>
                        
                        <div class="dashboard-card">
                            <h3>Recent Resonances</h3>
                            <div class="resonance-list" id="recent-resonances">
                                <p class="empty-state">No resonances yet. Start exploring!</p>
                            </div>
                        </div>
                        
                        <div class="dashboard-card">
                            <h3>Community Journeys</h3>
                            <div class="community-preview" id="community-preview">
                                <p class="empty-state">Discover journeys from other learners</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Journey Page -->
            <section id="journey-page" class="page">
                <div class="container">
                    <div class="page-header">
                        <h2>My Learning Journey</h2>
                        <button class="btn btn-primary" onclick="showNewQuestionModal()">
                            <i class="fas fa-plus"></i> New Question
                        </button>
                    </div>
                    
                    <div class="journey-container">
                        <div class="journey-map" id="journey-map">
                            <canvas id="journey-canvas" width="800" height="600"></canvas>
                        </div>
                        
                        <div class="journey-sidebar">
                            <div class="current-journey" id="current-journey">
                                <h3>Select a Journey</h3>
                                <p>Create a new journey or select an existing one to explore</p>
                            </div>
                            
                            <div class="journey-nodes" id="journey-nodes">
                                <!-- Nodes will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Community Page -->
            <section id="community-page" class="page">
                <div class="container">
                    <div class="page-header">
                        <h2>Community Resonance</h2>
                        <div class="community-filters">
                            <select id="resonance-filter">
                                <option value="all">All Resonances</option>
                                <option value="high">High Resonance</option>
                                <option value="recent">Recently Active</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="community-grid">
                        <div class="resonance-feed" id="resonance-feed">
                            <!-- Resonance cards will be populated here -->
                        </div>
                        
                        <div class="dialogue-circles">
                            <h3>Active Dialogue Circles</h3>
                            <div id="dialogue-list">
                                <p class="empty-state">No active dialogues. Start one!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sync Lab Page -->
            <section id="sync-page" class="page">
                <div class="container">
                    <div class="page-header">
                        <h2>Synchronous Learning Lab</h2>
                        <button class="btn btn-primary" onclick="createSyncSession()">
                            <i class="fas fa-plus"></i> Create Session
                        </button>
                    </div>
                    
                    <div class="sync-container">
                        <div class="session-lobby" id="session-lobby">
                            <h3>Available Sessions</h3>
                            <div class="session-list" id="session-list">
                                <p class="empty-state">No active sessions</p>
                            </div>
                        </div>
                        
                        <div class="virtual-lab" id="virtual-lab" style="display: none;">
                            <div class="lab-toolbar">
                                <button class="tool-btn active" data-tool="cursor">
                                    <i class="fas fa-mouse-pointer"></i>
                                </button>
                                <button class="tool-btn" data-tool="pen">
                                    <i class="fas fa-pen"></i>
                                </button>
                                <button class="tool-btn" data-tool="text">
                                    <i class="fas fa-font"></i>
                                </button>
                                <button class="tool-btn" data-tool="shape">
                                    <i class="fas fa-shapes"></i>
                                </button>
                            </div>
                            <canvas id="lab-canvas" width="800" height="600"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Profile Page -->
            <section id="profile-page" class="page">
                <div class="container">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="profile-info">
                            <h2 id="profile-name">Learning Explorer</h2>
                            <p id="profile-email">explorer@learning.com</p>
                            <p class="profile-stats">
                                Journeys: <span id="total-journeys">0</span> | 
                                Insights: <span id="total-insights">0</span> | 
                                Resonances: <span id="total-resonances">0</span>
                            </p>
                        </div>
                    </div>
                    
                    <div class="profile-content">
                        <div class="profile-section">
                            <h3>Learning Preferences</h3>
                            <div class="preference-grid">
                                <div class="preference-item">
                                    <label>Exploration vs Closure</label>
                                    <input type="range" id="exploration-range" min="0" max="100" value="50">
                                    <div class="range-labels">
                                        <span>Closure</span>
                                        <span>Exploration</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="profile-section">
                            <h3>Resonance Profile</h3>
                            <div id="resonance-profile">
                                <p>Your resonance profile will develop as you engage more with the platform</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Modals -->
        <div id="new-question-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Start New Journey</h3>
                    <button class="modal-close" onclick="closeModal('new-question-modal')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="new-journey-form">
                        <div class="form-group">
                            <label>Core Question</label>
                            <textarea id="core-question" placeholder="What profound question are you exploring?" required></textarea>
                        </div>
                        <div class="form-group">
                            <label>Journey Title</label>
                            <input type="text" id="journey-title" placeholder="Give your journey a name" required>
                        </div>
                        <div class="form-group">
                            <label>Tags (optional)</label>
                            <input type="text" id="journey-tags" placeholder="philosophy, science, art...">
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeModal('new-question-modal')">
                                Cancel
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-rocket"></i> Begin Journey
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div id="node-editor-modal" class="modal">
            <div class="modal-content large">
                <div class="modal-header">
                    <h3>Exploration Node</h3>
                    <button class="modal-close" onclick="closeModal('node-editor-modal')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="node-editor">
                        <div class="editor-tabs">
                            <button class="tab-btn active" data-tab="content">Content</button>
                            <button class="tab-btn" data-tab="reflection">Reflection</button>
                            <button class="tab-btn" data-tab="insights">Insights</button>
                        </div>
                        
                        <div class="tab-content">
                            <div id="content-tab" class="tab-pane active">
                                <div class="form-group">
                                    <label>Node Title</label>
                                    <input type="text" id="node-title" placeholder="What are you exploring?">
                                </div>
                                <div class="form-group">
                                    <label>Content</label>
                                    <textarea id="node-content" placeholder="Describe your exploration, discoveries, or questions..."></textarea>
                                </div>
                            </div>
                            
                            <div id="reflection-tab" class="tab-pane">
                                <div class="reflection-prompts">
                                    <h4>Reflection Prompts</h4>
                                    <div class="prompt-item">
                                        <p>What surprised you most about this exploration?</p>
                                        <textarea placeholder="Your reflection..."></textarea>
                                    </div>
                                    <div class="prompt-item">
                                        <p>How does this connect to your core question?</p>
                                        <textarea placeholder="Your reflection..."></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="insights-tab" class="tab-pane">
                                <div class="insights-section">
                                    <h4>Captured Insights</h4>
                                    <div id="node-insights">
                                        <p class="empty-state">No insights captured yet</p>
                                    </div>
                                    <button class="btn btn-outline" onclick="addInsight()">
                                        <i class="fas fa-lightbulb"></i> Add Insight
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="editor-actions">
                            <button class="btn btn-secondary" onclick="closeModal('node-editor-modal')">
                                Cancel
                            </button>
                            <button class="btn btn-primary" onclick="saveNode()">
                                <i class="fas fa-save"></i> Save Node
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/storage.js"></script>
    <script src="js/models.js"></script>
    <script src="js/services.js"></script>
    <script src="js/components.js"></script>
    <script src="js/app.js"></script>
</body>
</html>